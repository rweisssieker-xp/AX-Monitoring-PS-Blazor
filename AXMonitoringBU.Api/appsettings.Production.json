{
  "Logging": {
    "LogLevel": {
      "Default": "Warning",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Error",
      "AXMonitoringBU": "Information"
    },
    "Serilog": {
      "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File" ],
      "MinimumLevel": {
        "Default": "Information",
        "Override": {
          "Microsoft": "Warning",
          "System": "Warning",
          "Microsoft.EntityFrameworkCore": "Error"
        }
      },
      "WriteTo": [
        {
          "Name": "Console",
          "Args": {
            "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
          }
        },
        {
          "Name": "File",
          "Args": {
            "path": "logs/axmonitoring-.json",
            "rollingInterval": "Day",
            "retainedFileCountLimit": 30,
            "formatter": "Serilog.Formatting.Json.JsonFormatter"
          }
        },
        {
          "Name": "File",
          "Args": {
            "path": "logs/axmonitoring-.txt",
            "rollingInterval": "Day",
            "retainedFileCountLimit": 30,
            "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
          }
        }
      ],
      "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ]
    }
  },
  "AllowedHosts": "*",
  "App": {
    "Title": "AX Monitoring BU",
    "Version": "1.0.0",
    "Debug": false,
    "Environment": "Production"
  },
  "ConnectionStrings": {
    "DefaultConnection": "${DB_CONNECTION_STRING}"
  },
  "Database": {
    "Server": "${AX_DB_SERVER}",
    "Name": "${AX_DB_NAME}",
    "User": "${AX_DB_USER}",
    "Password": "${AX_DB_PASSWORD}",
    "UseWindowsAuthentication": "${AX_USE_WINDOWS_AUTH}",
    "Driver": "${DB_DRIVER}",
    "ConnectionTimeout": 30,
    "CommandTimeout": 60,
    "DeadlockView": "dbo.v_Deadlocks",
    "ExtendedEventsPath": "${XE_DEADLOCK_PATH}"
  },
  "MonitoringDatabase": {
    "Provider": "SqlServer",
    "ConnectionString": "${MONITORING_DB_CONNECTION_STRING}"
  },
  "AOS": {
    "Servers": [
      "${AOS_SERVER_1}",
      "${AOS_SERVER_2}"
    ],
    "DefaultServer": "${AOS_SERVER_1}",
    "ConnectionTimeout": 30
  },
  "Monitoring": {
    "CheckIntervalMinutes": 5,
    "RetentionDays": 90,
    "BatchSize": 1000,
    "Thresholds": {
      "CpuPercent": 80,
      "MemoryPercent": 85,
      "DiskPercent": 90,
      "BlockingDurationSeconds": 30,
      "DeadlockCount": 1
    },
    "MaintenanceWindows": {
      "Enabled": true,
      "DefaultSuppressAlerts": true,
      "DefaultSuppressNotifications": true
    }
  },
  "Alerts": {
    "Email": {
      "Enabled": "${EMAIL_ENABLED}",
      "SmtpServer": "${SMTP_SERVER}",
      "SmtpPort": "${SMTP_PORT}",
      "SmtpUser": "${SMTP_USER}",
      "SmtpPassword": "${SMTP_PASSWORD}",
      "FromAddress": "${EMAIL_FROM}",
      "SenderEmail": "${SENDER_EMAIL}",
      "SenderPassword": "${SENDER_PASSWORD}",
      "UseTls": true,
      "CriticalRecipients": "${CRITICAL_EMAIL_RECIPIENTS}",
      "WarningRecipients": "${WARNING_EMAIL_RECIPIENTS}",
      "InfoRecipients": "${INFO_EMAIL_RECIPIENTS}"
    },
    "Teams": {
      "Enabled": "${TEAMS_ENABLED}",
      "CriticalWebhookUrl": "${TEAMS_CRITICAL_WEBHOOK_URL}",
      "WarningWebhookUrl": "${TEAMS_WARNING_WEBHOOK_URL}",
      "InfoWebhookUrl": "${TEAMS_INFO_WEBHOOK_URL}"
    }
  },
  "Security": {
    "SecretKey": "${SECRET_KEY}",
    "JwtSecret": "${JWT_SECRET}",
    "SessionTimeoutMinutes": 60
  },
  "Integrations": {
    "Ticketing": {
      "DefaultSystem": "${TICKETING_SYSTEM}",
      "ServiceNow": {
        "BaseUrl": "${SERVICENOW_URL}",
        "Username": "${SERVICENOW_USERNAME}",
        "Password": "${SERVICENOW_PASSWORD}",
        "Table": "incident"
      },
      "Jira": {
        "BaseUrl": "${JIRA_URL}",
        "Username": "${JIRA_USERNAME}",
        "ApiToken": "${JIRA_API_TOKEN}",
        "ProjectKey": "${JIRA_PROJECT_KEY}"
      },
      "AzureDevOps": {
        "BaseUrl": "${AZURE_DEVOPS_URL}",
        "PersonalAccessToken": "${AZURE_DEVOPS_PAT}",
        "Organization": "${AZURE_DEVOPS_ORG}",
        "Project": "${AZURE_DEVOPS_PROJECT}"
      }
    }
  },
  "UI": {
    "Theme": {
      "PrimaryColor": "#1f77b4",
      "BackgroundColor": "#ffffff",
      "SecondaryBackgroundColor": "#f0f2f6",
      "TextColor": "#262730"
    },
    "Dashboard": {
      "RefreshIntervalSeconds": 30,
      "MaxDataPoints": 1000
    },
    "Charts": {
      "DefaultHeight": 400,
      "AnimationDuration": 500
    }
  },
  "ML": {
    "ModelPath": "./models/",
    "AnomalyThreshold": 0.8,
    "PredictionHorizonHours": 24,
    "RetrainIntervalHours": 168,
    "Features": [
      "cpu_percent",
      "memory_percent",
      "disk_percent",
      "active_sessions",
      "blocking_sessions"
    ]
  },
  "OpenAI": {
    "ApiKey": "${OPENAI_API_KEY}",
    "Model": "gpt-4o-mini",
    "BaseUrl": "https://api.openai.com/v1",
    "MaxTokens": 500,
    "AnalysisEnabled": "${OPENAI_ANALYSIS_ENABLED}"
  },
  "RateLimiting": {
    "Enabled": true,
    "PermitLimit": 100,
    "Window": "00:01:00",
    "QueueLimit": 0
  },
  "Cors": {
    "AllowedOrigins": [
      "${CORS_ALLOWED_ORIGIN_1}",
      "${CORS_ALLOWED_ORIGIN_2}"
    ]
  }
}

